!function(a){a.fn.jQPrefetch=function(b){b=jQuery.extend({ajaxAnchor:"a",ajaxURL:"href",ajaxContainer:".container",currentContainer:document.location.href,exclude:".donotpreload",pageExtension:".html"},b);var e,d=["Link","loading","preLoaded"],f=new Array;a(window).on("load",function(){var c=document.location.href.split("/");c=c[c.length-1].split(".")[0],""==c&&(c="index"),a(b.ajaxContainer).addClass(c.toLowerCase()),e=a("."+c.toLowerCase()).parent();var d=f.length;f[d],f.GetMultiArray(d),f[d].LinkName=c.toLowerCase(),f[d].PreLoadState="preLoaded",_scanHtmlLoop(),window.setTimeout(function(){_warmUpCacheLoop()},0)}),_scanHtmlLoop=function(){a(b.ajaxAnchor).not(b.exclude).each(function(){if(null!=a(this).attr(b.ajaxURL)){var c=a(this).attr(b.ajaxURL).split("/");if(c=c[c.length-1].split(".")[0],!f.contains(c)){var d=f.length;f.GetMultiArray(d),f[d].LinkName=c.toLowerCase(),f[d].PreLoadState="Link"}}})},_warmUpCacheLoop=function(){var a=0,b="true";do{if(a>=f.length){b="false";break}if("Link"==f[a].PreLoadState){f[a].PreLoadState="loading";break}a++}while(f.length>=a);"true"==b&&_prelaodContent(f[a].LinkName)},_prelaodContent=function(c,d){var g=0;a("<div>").load(c+".html "+b.ajaxContainer,function(){var h=document.location.href.split("/");h=h[h.length-1].split(".")[0],""==h&&(h="index"),a(this).find("img").each(function(){g++}),a(this).find("img").on("load",function(){g--,0==g&&(d&&_showContent(c),window.setTimeout(function(){_warmUpCacheLoop()},0))}),a(this).find("img").error(function(){g--}),0==g&&window.setTimeout(function(){_warmUpCacheLoop()},0),a(this).find(b.ajaxContainer).addClass(c.toLowerCase()),e.append(a(this).html()),a("."+c.toLowerCase()).css("display","none"),f[f.indexOf(c)].PreLoadState="preLoaded",_addClick(this,c)})},_addClick=function(c,d){a("."+d.toLowerCase()+" "+b.ajaxAnchor).not(b.exclude).click(function(){return _Click(this),!1})},_Click=function(c){var d=a(c).attr(b.ajaxURL).split("/");d=d[d.length-1].split(".")[0],_tryShowContent(d.toLowerCase()),history.pushState("","",d+b.pageExtension)},a(b.ajaxAnchor).not(b.exclude).on("click",function(){return _Click(this),!1}),window.onpopstate=function(){if(null!=window.history.state){var b=document.location.href.split("/");b=b[b.length-1].split(".")[0],_tryShowContent(b.toLowerCase())}},_getState=function(a){var b=f[f.indexOf(a)].PreLoadState;for(var c in d){var e=new RegExp(d[c]);if(b.match(e))return d[c]}},_tryShowContent=function(a){var b=_getState(a);switch(b){case d[0]:f[f.indexOf(a)].PreLoadState="loading",_prelaodContent(a,"true");break;case d[1]:window.setTimeout(function(){_tryShowContent(a)},100);break;case d[2]:_showContent(a)}},_showContent=function(c){switch(a(b.ajaxContainer).css("display","none"),a("."+c).css("display","block"),c){case"sat-nam-rasayan":case"workshops-massage-kurse-gong-meditation":case"yoga-shakti-dance-nobember-2013":case"sat-nam-rasayan":case"kundalini-yogalehrerausbildung-stufe-1-infoabende":case"cleaning-the-subconcious":case"cleaning-the-subconcious-2014":case"erkenne-deine-wahre-bestimmung":case"hormonyoga-im-kundaliniyoga-2014":Slider.initialize();break;case"yoga-workshops-veranstaltungen":case"workshops":Slider.initialize(),window.setTimeout(function(){a(".Teaser").children("li").addClass("viewport")},100);break;default:a(".Teaser").children("li").removeClass("viewport")}"kontakt"==c&&(a("#map").is(".olMap")||drawmap())}},Array.prototype.GetMultiArray=function(a){this[a]=new Array},Array.prototype.append=function(a){this[a]=new Array},Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(a.toLowerCase()==this[b].LinkName)return b},Array.prototype.contains=function(a){for(var b=this.length;b--;)if(this[b]&&this[b].LinkName===a.toLowerCase())return!0;return!1}}(jQuery);